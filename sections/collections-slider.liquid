{% comment %}
  Responsive Collection Carousel using SwiperJS
  - 3 slides per view on desktop
  - 2 on tablets
  - Scrollable list on mobile
{% endcomment %}

<!-- Swiper CSS -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
>

<div class="collection-carousel-section bg-[#C3D8B4] py-12">
  <div class="mx-auto max-w-7xl px-4">
    {% if section.settings.heading != blank %}
      <h2 class="text-3xl font-semibold text-center mb-10 tracking-wide">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <!-- Swiper Container -->
    <div class="relative">
      <div
        class="swiper collection-swiper hidden md:block"
        id="collectionSwiper-{{ section.id }}"
      >
        <div class="swiper-wrapper">
          {% for collection in collections %}
            <div class="swiper-slide">
              <a
                href="{{ collection.url }}"
                class="block rounded-md overflow-hidden group"
              >
                {% if collection.image %}
                  <img
                    src="{{ collection.image | img_url: '800x' }}"
                    alt="{{ collection.title }}"
                    class="w-full h-[400px] object-cover group-hover:scale-105 transition-transform duration-500"
                  >
                {% endif %}
                <p class="mt-3 text-center text-lg font-medium text-gray-900">{{ collection.title }} &rsaquo;</p>
              </a>
            </div>
          {% endfor %}
        </div>

        <!-- Arrows -->
        <div
          class="swiper-button-prev !text-gray-800 hover:!text-black !left-0"
        ></div>
        <div
          class="swiper-button-next !text-gray-800 hover:!text-black !right-0"
        ></div>
      </div>

      <!-- Mobile (Horizontal Scroll) -->
      <div class="flex space-x-4 overflow-x-auto md:hidden pb-2 snap-x snap-mandatory">
        {% for collection in collections %}
          <div class="flex-shrink-0 w-3/4 snap-center">
            <a href="{{ collection.url }}" class="block rounded-md overflow-hidden">
              {% if collection.image %}
                <img
                  src="{{ collection.image | img_url: '800x' }}"
                  alt="{{ collection.title }}"
                  class="w-full h-60 object-cover"
                >
              {% endif %}
              <p class="mt-3 text-center text-base font-medium text-gray-900">{{ collection.title }} &rsaquo;</p>
            </a>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    new Swiper('#collectionSwiper-{{ section.id }}', {
      slidesPerView: 3,
      spaceBetween: 24,
      slidesPerGroup: 3,
      loop: false,
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      speed: 600,
      breakpoints: {
        768: {
          slidesPerView: 2,
          slidesPerGroup: 2,
        },
        1024: {
          slidesPerView: 3,
          slidesPerGroup: 3,
        },
      },
    });
  });
</script>

{% schema %}
{
  "name": "Collection Carousel",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "SHOP. GIFT. STYLE."
    }
  ],
  "presets": [
    {
      "name": "Collection Carousel",
      "category": "Custom"
    }
  ]
}
{% endschema %}
