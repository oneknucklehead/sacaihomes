{% schema %}
{
  "name": "Collection Slider",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Shop Our Collections"
    }
  ]
}
{% endschema %}

<div class="collection-slider-section py-10 bg-white">
  <div class="container mx-auto px-4">
    {% if section.settings.heading != blank %}
      <h2 class="text-2xl md:text-3xl font-bold mb-6 text-center">{{ section.settings.heading }}</h2>
    {% endif %}

    <div class="glide">
      <div class="glide__track" data-glide-el="track">
        <ul class="glide__slides grid grid-cols-1 md:grid-cols-3 gap-6">
          {% for collection in collections %}
            <li class="glide__slide bg-gray-100 rounded-lg overflow-hidden shadow hover:shadow-lg transition-all">
              <a href="{{ collection.url }}">
                {% if collection.image %}
                  <img
                    src="{{ collection.image | img_url: '500x' }}"
                    alt="{{ collection.title }}"
                    class="w-full h-48 object-cover"
                  >
                {% else %}
                  <div class="w-full h-48 bg-gray-300 flex items-center justify-center text-gray-700">No Image</div>
                {% endif %}
                <h3 class="text-lg font-semibold p-4 text-center">{{ collection.title }}</h3>
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>

      <!-- Arrows -->
      <div class="flex justify-between items-center mt-4">
        <button
          data-glide-dir="<"
          class="glide__arrow glide__arrow--left bg-gray-800 text-white p-2 rounded hover:bg-gray-700"
        >
          &#10094;
        </button>
        <button
          data-glide-dir=">"
          class="glide__arrow glide__arrow--right bg-gray-800 text-white p-2 rounded hover:bg-gray-700"
        >
          &#10095;
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    new Glide('.glide', {
      type: 'carousel',
      perView: 3,
      focusAt: 'center',
      gap: 24,
      autoplay: false,
      hoverpause: true,
      rewind: true,
      breakpoints: {
        1024: { perView: 2 },
        640: { perView: 1 },
      },
    }).mount();
  });
</script>
