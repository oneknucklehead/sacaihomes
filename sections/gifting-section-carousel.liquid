{% comment %}
  Gifting Hero + Product Slider (Slick Version)
{% endcomment %}

{% assign ai_gen_id = section.id | replace: '_', '' | downcase %}

<!-- Slick CSS (LOCAL LOAD ONLY) -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css">

{% style %}
    .gifting-hero-{{ ai_gen_id }} {
      background-color: {{ section.settings.background_color }};
      padding: 40px 0;
    }
    .gifting-hero__container-{{ ai_gen_id }} {
      max-width: {{ section.settings.container_width }}px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .gifting-hero__grid-{{ ai_gen_id }} {
      display: flex;
      flex-wrap: wrap;
      gap: 32px;
      align-items: stretch;
    }

    .gifting-hero__left-{{ ai_gen_id }} {
      flex: 1 1 56%;
      min-width: 320px;
    }
    .gifting-hero__left-{{ ai_gen_id }} img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display:block;
    }

    .gifting-hero__right-{{ ai_gen_id }} {
      flex: 0 0 40%;
      min-width: 300px;
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
    }

    .ai-slider-item-{{ ai_gen_id }} a {
      display:block;
      padding: {{ section.settings.card_item_padding }}px;
      text-decoration:none;
    }

    .ai-slider-card-{{ ai_gen_id }} {
      border-radius: {{ section.settings.card_border_radius }}px;
      overflow:hidden;
      background: {{ section.settings.card_background }};
    }

    .ai-img-wrap-{{ ai_gen_id }} {
      width:100%;
      padding-bottom: {{ section.settings.image_ratio }}%;
      position:relative;
      overflow:hidden;
      background:#eee;
    }

    .ai-img-{{ ai_gen_id }} {
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      transition:opacity .5s ease, transform .5s ease;
    }

    .ai-second-{{ ai_gen_id }} { opacity:0; }
    .ai-slider-card-{{ ai_gen_id }}:hover .ai-second-{{ ai_gen_id }} {
      opacity:1;
    }
    .ai-slider-card-{{ ai_gen_id }}:hover .ai-first-{{ ai_gen_id }} {
      opacity:0;
    }

    .ai-title-{{ ai_gen_id }} {
      text-align: {{ section.settings.text_alignment }};
      padding: 14px;
      font-size: {{ section.settings.title_size }}px;
      color: {{ section.settings.title_color }};
      font-weight:600;
    }

    /* Text + Button */
    .gifting-hero__heading-{{ ai_gen_id }} {
      font-size: {{ section.settings.heading_size }}px;
      color: {{ section.settings.heading_color }};

    }
    .gifting-hero__subtext-{{ ai_gen_id }} {
      color: {{ section.settings.subtext_color }};
      font-size: {{ section.settings.subtext_size }}px;
      line-height:1.5;
    }
    .gifting-hero__btn-{{ ai_gen_id }} {
      border:1px solid #273A27;
      padding:10px 22px;
      margin-top:18px;
      display:inline-block;
      text-decoration:none;
      font-weight:600;
      color:#273A27;
    }
  .ai-slider-{{ ai_gen_id }} {
    position: relative;
  }

  .slick-prev.custom-prev-{{ ai_gen_id }},
  .slick-next.custom-next-{{ ai_gen_id }} {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 15;
    /* background: transparent; */
    border: none;
    padding: 0;
    cursor: pointer;
    width: 50px;
    height: 50px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Left arrow inside */
  .slick-prev.custom-prev-{{ ai_gen_id }} {
    left: 8px;
  }

  /* Right arrow inside */
  .slick-next.custom-next-{{ ai_gen_id }} {
    right: 8px;
  }

  /* Remove slick default arrow styles */
  .slick-prev:before,
  .slick-next:before {
    display: none !important;
  }
    /* Responsive */
    @media(max-width: 1024px) {
      .gifting-hero__left-{{ ai_gen_id }},
      .gifting-hero__right-{{ ai_gen_id }} {
        flex-basis:100%;
      }
      .gifting-hero__subtext-{{ ai_gen_id }} {
        max-width:100%;
      }
    }
{% endstyle %}

<section class="gifting-hero-{{ ai_gen_id }}">
  <div class="gifting-hero__container-{{ ai_gen_id }}">
    <div class="gifting-hero__grid-{{ ai_gen_id }}">
      <!-- LEFT IMAGE -->
      <div class="gifting-hero__left-{{ ai_gen_id }}">
        {% if section.settings.hero_image %}
          <img src="{{ section.settings.hero_image | image_url: width: 2000 }}">
        {% else %}
          <div style="background:#ddd;height:420px;"></div>
        {% endif %}
      </div>

      <!-- RIGHT COLUMN -->
      <div class="gifting-hero__right-{{ ai_gen_id }}">
        {% assign products = section.settings.carousel_collection.products %}

        {% if products.size > 0 %}
          <div class="ai-slider-{{ ai_gen_id }}">
            {% for product in products %}
              <div class="ai-slider-item-{{ ai_gen_id }}">
                <a href="{{ product.url }}">
                  <div class="ai-slider-card-{{ ai_gen_id }}">
                    <div class="ai-img-wrap-{{ ai_gen_id }}">
                      <!-- Main image -->
                      {% assign first = product.featured_image %}
                      {% if first %}
                        <img
                          class="ai-img-{{ ai_gen_id }} ai-first-{{ ai_gen_id }}"
                          src="{{ first | image_url: width: 900 }}"
                        >
                      {% endif %}

                      <!-- Second hover image -->
                      {% assign second = product.images[1] %}
                      {% if second %}
                        <img
                          class="ai-img-{{ ai_gen_id }} ai-second-{{ ai_gen_id }}"
                          src="{{ second | image_url: width: 900 }}"
                        >
                      {% endif %}
                    </div>

                    {% comment %} <div class="ai-title-{{ ai_gen_id }}">{{ product.title }}</div> {% endcomment %}
                  </div>
                </a>
              </div>
            {% endfor %}
          </div>
        {% endif %}

        <!-- Text + Button -->
        <div class="fles flex-col justify-center items-center text-center">
          <h2 class="gifting-hero__heading-{{ ai_gen_id }} mb-2">{{ section.settings.hero_heading }}</h2>
          <p class="gifting-hero__subtext-{{ ai_gen_id }}">{{ section.settings.hero_subtext }}</p>

          {% if section.settings.explore_collection %}
            <a class="gifting-hero__btn-{{ ai_gen_id }}" href="{{ section.settings.explore_collection.url }}">
              {{ section.settings.button_label }}
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Slick JS (LOCAL ONLY) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<script>
  $(document).ready(function () {
    $('.ai-slider-{{ ai_gen_id }}').slick({
      infinite: true,
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: true,

      prevArrow: `
      <button class="slick-prev custom-prev-{{ ai_gen_id }}">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="80"
          height="80"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-chevron-left-icon lucide-chevron-left text-[#273A27]"
        >
          <path d="m15 18-6-6 6-6" />
        </svg>
      </button>
    `,

      nextArrow: `
      <button class="slick-next custom-next-{{ ai_gen_id }}">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="80"
          height="80"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-chevron-right-icon lucide-chevron-right text-[#273A27]"
        >
          <path d="m9 18 6-6-6-6" />
        </svg>
      </button>
    `,
    });
  });
</script>

{% schema %}
{
  "name": "Gifting product slider",
  "settings": [
    { "type": "image_picker", "id": "hero_image", "label": "Left hero image" },

    { "type": "text", "id": "hero_heading", "label": "Heading", "default": "Wedding Gifting" },

    {
      "type": "textarea",
      "id": "hero_subtext",
      "label": "Subtext",
      "default": "Beautifully packaged, perfectly picked â€“ Celebrate the new beginning with thoughtfully curated wedding gifts."
    },

    { "type": "collection", "id": "explore_collection", "label": "Explore button collection" },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "EXPLORE" },

    { "type": "collection", "id": "carousel_collection", "label": "Product collection (slider)" },

    {
      "type": "range",
      "id": "container_width",
      "label": "Container width",
      "min": 800,
      "max": 1600,
      "step": 50,
      "default": 1400
    },

    {
      "type": "range",
      "id": "image_ratio",
      "label": "Image ratio (padding-bottom %)",
      "min": 60,
      "max": 150,
      "step": 1,
      "default": 80
    },

    {
      "type": "range",
      "id": "title_size",
      "label": "Title size",
      "min": 12,
      "max": 26,
      "default": 16
    },

    { "type": "color", "id": "title_color", "label": "Title color", "default": "#273A27" },

    {
      "type": "range",
      "id": "subtext_size",
      "label": "Subtext size",
      "min": 12,
      "max": 20,
      "default": 14
    },
    { "type": "color", "id": "subtext_color", "label": "Subtext color", "default": "#555555" },

    {
      "type": "range",
      "id": "heading_size",
      "label": "Heading size",
      "min": 22,
      "max": 44,
      "default": 34
    },
    { "type": "color", "id": "heading_color", "label": "Heading color", "default": "#6b5b4e" },

    {
      "type": "range",
      "id": "card_border_radius",
      "label": "Card border radius",
      "min": 0,
      "max": 24,
      "default": 8
    },
    {
      "type": "range",
      "id": "card_item_padding",
      "label": "Card item padding",
      "min": 0,
      "max": 100,
      "default": 100
    },
    { "type": "color", "id": "card_background", "label": "Card background", "default": "#ffffff" },

    { "type": "color", "id": "background_color", "label": "Background color", "default": "#f3f2ee" },

    {
      "type": "select",
      "id": "text_alignment",
      "label": "Card text alignment",
      "options": [
        { "label": "Left", "value": "left" },
        { "label": "Center", "value": "center" },
        { "label": "Right", "value": "right" }
      ],
      "default": "center"
    }
  ],
  "presets": [{ "name": "Gifting product slider (Slick)" }]
}
{% endschema %}
