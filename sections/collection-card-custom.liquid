<div class="w-full">
  {%- assign cards = (1..3) -%}

  <!-- DESKTOP GRID -->
  <div class="hidden md:grid grid-cols-3 h-[75vh]">
    {% for i in cards %}
      {% capture img %}card{{ i }}_img{% endcapture %}
      {% capture text %}card{{ i }}_text{% endcapture %}
      {% capture link %}card{{ i }}_link{% endcapture %}

      <a
        href="{{ section.settings[link] }}"
        class="relative block overflow-hidden group cursor-pointer"
      >
        <div
          class="absolute inset-0 bg-cover bg-center transition-transform duration-[2000ms] ease-out group-hover:scale-110"
          style="background-image:url('{{ section.settings[img] | image_url: width: 1500 }}');"
        ></div>

        <button
          class="absolute bottom-10 left-1/2 -translate-x-1/2 px-6 py-2 border border-white text-white tracking-[3px] text-sm backdrop-blur-sm"
        >
          {{ section.settings[text] }}
        </button>
      </a>
    {% endfor %}
  </div>

  <!-- MOBILE CAROUSEL -->
  <div class="md:hidden relative">
    <!-- Swiper container -->
    <div class="swiper categorySwiper h-[70vh]">
      <div class="swiper-wrapper">
        {%- assign cards = (1..3) -%}
        {% for i in cards %}
          {% capture img %}card{{ i }}_img{% endcapture %}
          {% capture text %}card{{ i }}_text{% endcapture %}
          {% capture link %}card{{ i }}_link{% endcapture %}

          <a
            href="{{ section.settings[link] }}"
            class="swiper-slide relative block w-full h-full"
          >
            <div
              class="absolute inset-0 bg-cover bg-center"
              style="background-image:url('{{ section.settings[img] | image_url: width: 1000 }}');"
            ></div>

            <button
              class="absolute bottom-10 left-1/2 -translate-x-1/2 px-6 py-2 border border-white text-white tracking-[3px] text-xs backdrop-blur-sm"
            >
              {{ section.settings[text] }}
            </button>
          </a>
        {% endfor %}
      </div>

      <!-- Pagination Dots -->
      <div class="swiper-pagination !bottom-3"></div>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    new Swiper('.categorySwiper', {
      loop: true,
      grabCursor: true,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      autoplay: {
        delay: 3000,
        disableOnInteraction: false,
      },
      speed: 600,
    });
  });
</script>
<script>
  // Mobile Carousel Script
  document.addEventListener('DOMContentLoaded', () => {
    const carousel = document.querySelector('#catCarousel > div');
    const dots = document.querySelectorAll('.dot');

    let index = 0;

    function updateCarousel() {
      carousel.style.transform = `translateX(-${index * 100}%)`;
      dots.forEach((dot, i) => (dot.style.opacity = i === index ? '1' : '0.6'));
    }

    dots.forEach((dot, i) => {
      dot.addEventListener('click', () => {
        index = i;
        updateCarousel();
      });
    });
  });
</script>

{% schema %}
{
  "name": "Category Banner Cards",
  "settings": [
    { "type": "image_picker", "id": "card1_img", "label": "Card 1 Image" },
    { "type": "text", "id": "card1_text", "label": "Card 1 Button Text", "default": "LEATHER" },
    { "type": "url", "id": "card1_link", "label": "Card 1 Link" },

    { "type": "image_picker", "id": "card2_img", "label": "Card 2 Image" },
    { "type": "text", "id": "card2_text", "label": "Card 2 Button Text", "default": "HOME DECOR" },
    { "type": "url", "id": "card2_link", "label": "Card 2 Link" },

    { "type": "image_picker", "id": "card3_img", "label": "Card 3 Image" },
    { "type": "text", "id": "card3_text", "label": "Card 3 Button Text", "default": "SERVING" },
    { "type": "url", "id": "card3_link", "label": "Card 3 Link" }
  ],
  "presets": [
    {
      "name": "Category Banner Cards"
    }
  ]
}
{% endschema %}
